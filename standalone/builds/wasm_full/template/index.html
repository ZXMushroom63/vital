<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VialTemplate</title>
</head>

<body>
    <canvas width="400" height="300" id="canvas"
        style="width: 400; height: 300; border: 1px solid black; image-rendering: pixelated; background: linear-gradient(132deg,rgba(65, 63, 110, 1) 0%, rgba(141, 138, 166, 1) 35%, rgba(128, 182, 194, 1) 100%);"></canvas>
    <br>
    <span>Checking WebGL Availability...</span><button id="init">init</button>
    <script src="vial.js"></script>
    <script>
        function detectWebGLContext() {
            const canvas = document.createElement("canvas");
            const gl = canvas.getContext("webgl");
            return (gl instanceof WebGLRenderingContext)
                    ? "Congratulations! Your browser supports WebGL."
                    : "Failed. Your browser or device may not support WebGL.";
        }
        createModule({
            canvas: document.querySelector("#canvas")
        }).then(Vial => {
            globalThis.Vial = Vial;
        });
        addEventListener("load", ()=>{
            document.querySelector("span").innerText = detectWebGLContext();
            document.querySelector("#init").addEventListener("click", ()=>{
                Vial._startApplication_Classic();
                Vial._vialSetWindowSize(400, 300);
            });
        });
        function getProgramComponents(programID, kNumShaders) {
            kNumShaders ||= 21;
            return {
                "VertexShaderID": Math.floor(programID / kNumShaders),
                "FragmentShaderID": programID % kNumShaders
            };
        }
    </script>
</body>

</html>